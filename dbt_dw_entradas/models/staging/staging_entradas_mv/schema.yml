version: 2

models:
  - name: stg_con_pag
    description: "Staging da previsão de contas a pagar"
    columns:
      - name: CD_CON_PAG
        description: "Código da conta a pagar"
        tests:
          - unique
          - not_null
      - name: CD_PROCESSO
        description: "Código do processo"
      - name: CD_REDUZIDO
        description: "Código reduzido"
      - name: CD_TIP_DOC
        description: "Código do tipo de documento"
      - name: CD_FORNECEDOR
        description: "Código do fornecedor"
        tests:
          - not_null
      - name: DS_CON_PAG
        description: "Descrição da conta a pagar"
      - name: NR_DOCUMENTO
        description: "Número do documento"
      - name: NR_SERIE
        description: "Número da série"
      - name: DT_LANCAMENTO
        description: "Data de lançamento"
        tests:
          - not_null
      - name: TP_VENCIMENTO
        description: "Tipo de vencimento"
      - name: VL_BRUTO_CONTA
        description: "Valor bruto da conta"

  - name: stg_ratcon_pag
    description: "Staging do rateio de contas a pagar"
    columns:
      - name: CD_RATCON_PAG
        description: "Código do rateio da conta a pagar"
        tests:
          - unique
          - not_null
      - name: CD_CON_PAG
        description: "Código da conta a pagar"
        tests:
          - not_null
          - relationships:
              config:
                severity: warn
              to: ref('stg_con_pag')
              field: CD_CON_PAG
      - name: CD_SETOR
        description: "Código do setor"
      - name: CD_REDUZIDO
        description: "Código reduzido"
      - name: CD_ITEM_RES
        description: "Código do item responsável"
      - name: DT_COMPETENCIA
        description: "Data de competência"
      - name: VL_RATEIO
        description: "Valor do rateio"

  - name: stg_itcon_pag
    description: "Staging dos itens/parcelas de contas a pagar"
    columns:
      - name: CD_ITCON_PAG
        description: "Código do item da conta a pagar"
        tests:
          - unique
          - not_null
      - name: CD_CON_PAG
        description: "Código da conta a pagar"
        tests:
          - not_null
          - relationships:
              config:
                severity: warn
              to: ref('stg_con_pag')
              field: CD_CON_PAG
      - name: NR_PARCELA
        description: "Número da parcela"
      - name: DT_VENCIMENTO
        description: "Data de vencimento"
      - name: DT_PREVISTA_PAG
        description: "Data prevista de pagamento"
      - name: TP_QUITACAO
        description: "Tipo de quitação"
      - name: VL_DUPLICATA
        description: "Valor da duplicata"

  - name: stg_pagcon_pag
    description: "Staging dos pagamentos realizados das contas a pagar"
    columns:
      - name: CD_PAGCON_PAG
        description: "Código do pagamento da conta a pagar"
        tests:
          - unique
          - not_null
      - name: CD_ITCON_PAG
        description: "Código do item da conta a pagar"
        tests:
          - not_null
          - relationships:
              config:
                severity: warn
              to: ref('stg_itcon_pag')
              field: CD_ITCON_PAG
      - name: DS_PAGCON_PAG
        description: "Descrição do pagamento"
      - name: DT_PAGAMENTO
        description: "Data de pagamento"
      - name: DT_BAIXA
        description: "Data de baixa"
      - name: TP_PAGAMENTO
        description: "Tipo de pagamento"
      - name: VL_ACRESCIMO
        description: "Valor de acréscimo"
      - name: VL_DESCONTO
        description: "Valor de desconto"
      - name: VL_PAGO
        description: "Valor pago"

  - name: stg_ent_serv
    description: "Staging das entradas de serviços"
    columns:
      - name: CD_ENT_SERV
        description: "Código da entrada de serviço"
        tests:
          - unique
          - not_null
      - name: CD_CON_PAG
        description: "Código da conta a pagar"
      - name: CD_FORNECEDOR
        description: "Código do fornecedor"
        tests:
          - not_null
      - name: CD_OFICINA
        description: "Código da oficina"
      - name: CD_TIP_DOC
        description: "Código do tipo de documento"
      - name: CD_USUARIO
        description: "Código do usuário"
      - name: NR_DOCUMENTO
        description: "Número do documento"
      - name: NR_SERIE
        description: "Número da série"
      - name: DT_ENTRADA
        description: "Data de entrada"
        tests:
          - not_null
      - name: DT_EMISSAO
        description: "Data de emissão"
      - name: DS_OBSERVACAO
        description: "Observação"
      - name: VL_TOTAL
        description: "Valor total"

  - name: stg_departamentos
    description: "Staging dos setores/departamentos"
    columns:
      - name: CD_SETOR
        description: "Código do setor"
        tests:
          - unique
          - not_null
      - name: NM_SETOR
        description: "Nome do setor"
      - name: CD_CEN_CUS
        description: "Código do centro de custo"

  - name: stg_fornecedores
    description: "Staging dos fornecedores"
    columns:
      - name: CD_FORNECEDOR
        description: "Código do fornecedor"
        tests:
          - unique
          - not_null
      - name: CD_CIDADE
        description: "Código da cidade"
      - name: CD_SETOR
        description: "Código do setor"
      - name: NM_FORNECEDOR
        description: "Nome do fornecedor"
      - name: NM_FANTASIA
        description: "Nome fantasia"
      - name: NR_CGC_CPF
        description: "Número do CGC/CPF"

  - name: stg_tipo_documento
    description: "Staging com os tipos de documentos fiscais"
    columns:
      - name: CD_TIP_DOC
        description: "Código do documento fiscal"
        tests:
          - unique
          - not_null
      - name: DS_TIP_DOC
        description: "Descrição do tipo de documento fiscal"